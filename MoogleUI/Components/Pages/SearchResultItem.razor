@*
    File: SearchResultItem.razor
    Component: UI Components
*@

@using Shared;
@using Microsoft.AspNetCore.Components

<div class="search-result-item">
    <h3 class="result-title">
        <a href="javascript:void(0)" @onclick="HandleResultClick">@Result.Title</a>
    </h3>
    <p class="result-snippet">
        @Result.Snippet
    </p>
</div>

@code {
    /// <summary>
    /// The SearchResult data to be displayed by this component.
    /// This parameter is required.
    /// </summary>
    [Parameter, EditorRequired]
    public SearchResult Result { get; set; } = new();

    /// <summary>
    /// An event callback that is invoked when the user clicks on the result's title.
    /// It passes the DocumentId of the clicked result to the parent component.
    /// </summary>
    [Parameter]
    public EventCallback<string> OnResultClicked { get; set; }

    /// <summary>
    /// Handles the click event on the result's title link.
    /// It invokes the OnResultClicked callback with the document's ID.
    /// </summary>
    /// <returns>A Task representing the asynchronous operation.</returns>
    private Task HandleResultClick()
    {
        // 1. Check if the OnResultClicked callback has a delegate assigned.
        // 2. If it does, invoke it, passing the DocumentId from the Result property.
        // Note: InvokeAsync handles the delegate check internally.
        return OnResultClicked.InvokeAsync(Result.DocumentId);
    }
}
